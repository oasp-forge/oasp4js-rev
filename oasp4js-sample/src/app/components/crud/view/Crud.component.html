<form id="firstOptionForm">
<div class = "filter">
  <form style = "margin-bottom: 30px" class="form-inline" (ngSubmit)="searchFilters(numberTable.value, stateTable.value, waiterTable.value)">
    <fieldset>
        <legend> Filters </legend>
        <div class = "form-flex">
          <label> Number </label>
          <input type ="number" class="form-control" #numberTable>
          <label> State </label>
          <input type ="text" class="form-control" #stateTable>
          <label> Waiter </label>
          <input type ="text" class="form-control" #waiterTable>
        </div>
        <div class = "right">
          <button type ="submit" class = "btn btn-primary btn-filter">Search</button>
        </div>

    </fieldset>
  </form>
</div>

<table class="table table-striped" style="cursor:pointer">
      <thead>
          <th (click) = "sortColumn(0, 'number')" > Number <a [class]="sortIconStyle[0]"></a></th>
          <th (click) = "sortColumn(1, 'state')"  > State  <a [class]="sortIconStyle[1]"></a></th>
          <th (click) = "sortColumn(2, 'waiter')" > Waiter <a [class]="sortIconStyle[2]"></a></th>
      </thead>
      <tbody>
          <tr *ngFor="let table of showTables" #row (click)=clickedRow(table)>
              <td [class.selected]="selectedTable === table">{{table.number}}</td>
              <td [class.selected]="selectedTable === table">{{table.state}}</td>
              <td [class.selected]="selectedTable === table">{{table.waiter}}</td>
          </tr>
      </tbody>
  </table>


  <div style="text-align:center;">
      <div [ngSwitch]="myState">
        <!-- 1 = FREE -->
	    	<template [ngSwitchWhen]="1">
          <div class="btn-group" role="group">
            <button type="button" class="btn btn-pagination" data-toggle="modal" data-target="#myModal">Edit</button>
            <button type="button" class="btn btn-pagination" (click)="reserve()">Reserve</button>
            <button type="button" class="btn btn-pagination" disabled="disabled">Cancel Reservation</button>
            <button type="button" class="btn btn-pagination" (click)="occupy()">Occupy</button>
            <button type="button" class="btn btn-pagination" disabled="disabled">Free</button>
          </div>
        </template>

        <!-- 2 = OCCUPIED -->
        <template [ngSwitchWhen]="2">
          <div class="btn-group" role="group">
            <button type="button" class="btn btn-pagination" data-toggle="modal" data-target="#myModal">Edit</button>
            <button type="button" class="btn btn-pagination" disabled="disabled">Reserve</button>
            <button type="button" class="btn btn-pagination" disabled="disabled">Cancel Reservation</button>
            <button type="button" class="btn btn-pagination" disabled="disabled">Occupy</button>
            <button type="button" class="btn btn-pagination" (click)="free()">Free</button>
          </div>
        </template>

        <!-- 3 = RESERVED -->
        <template [ngSwitchWhen]="3">
          <div class="btn-group" role="group">
            <button type="button" class="btn btn-pagination" data-toggle="modal" data-target="#myModal">Edit</button>
            <button type="button" class="btn btn-pagination" disabled="disabled">Reserve</button>
            <button type="button" class="btn btn-pagination" (click)="cancelReservation()">Cancel Reservation</button>
            <button type="button" class="btn btn-pagination" (click)="occupy()">Occupy</button>
            <button type="button" class="btn btn-pagination" disabled="disabled">Free</button>
          </div>
        </template>

	    	<template ngSwitchDefault>
          <div class="btn-group" role="group">
            <button type="button" class="btn btn-pagination" data-toggle="modal" data-target="#myModal" disabled="disabled">Edit</button>
            <button type="button" class="btn btn-pagination" disabled="disabled">Reserve</button>
            <button type="button" class="btn btn-pagination" disabled="disabled">Cancel Reservation</button>
            <button type="button" class="btn btn-pagination" disabled="disabled">Occupy</button>
            <button type="button" class="btn btn-pagination" disabled="disabled">Free</button>
          </div>
        </template>
	    </div>


      <div class="container">
        <div class="modal" id="myModal" role="dialog">
          <div class="modal-dialog modal-lm">
            <div class="modal-content">
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h3 class="modal-title" style="float:left;">Details for Table #{{selectedTable.number}}</h3>
              </div>
              <div class="modal-body">
                <tableDetails [parentTable]="selectedTable" (parentTableEvent)="selectedTable = $event" (resultEvent)="resetTable($event)" [_commands]="_commands"></tableDetails>
              </div>
            </div>
          </div>
        </div>
      </div>
  </div>

  <div style="text-align:right">
      <pagination [list] = "tables" [rowsPerPage] = "tablesPerPage" (paginationList) = "pagination($event)"></pagination>
  </div>

  <router-outlet></router-outlet>
</form>
